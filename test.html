<html>
  <head>
    <title>Demo</title>
    <script type='text/javascript'>
      var Module = {
        noInitialRun: true
      };

      // implement print
      var print = function(text) {
        var element = document.getElementById('output')
        element.innerHTML = text.replace('\n', '<br>', 'g') + element.innerHTML;
      }
    </script>
    <script src='Avc/avc.js' type='text/javascript'></script>
    <script type='text/javascript'>

      // Replace main loop handler

      _runMainLoop = function() {
          // TODO: only delay when proper to do so
          setInterval(_mainLoopIteration, 1000/50);
      }

      // Start everything on load

      function onLoad() {
        // Pass canvas and context to the generated code, and do the actual run() here
        Module.canvas = document.getElementById('canvas');
        Module.ctx2D = Module.canvas.getContext('2d');
        if (!Module.ctx2D) {
          alert('Canvas not available :(');
          return;
        }
        Module.run();
      }
    </script>
  <body onload='onLoad()' style='background-color: black; color: white'>
    <center>
      <canvas id='canvas'></canvas>
    </center>
    <div id='output'></div>
  </body>
</html>

