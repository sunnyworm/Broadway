<html>
  <head>
    <title>Demo</title>
    <script type='text/javascript'>
      var Module = {
        noInitialRun: true
      };
    </script>
    <script src='Avc/avc.elim.js' type='text/javascript'></script>
    <script type='text/javascript'>

      // Start everything on load

      function onLoad() {

        // Get the file
        var xhr = new XMLHttpRequest();
        xhr.open("GET", 'Media/admiral.264', false);
        xhr.responseType = "arraybuffer";
        xhr.send(null);
        var arrayBuffer = xhr.response;
        if (arrayBuffer) {
          var byteArray = new Uint8Array(arrayBuffer);
          var array = Array.prototype.slice.apply(byteArray);
          Module.FS.createDataFile('/', 'admiral.264', array, true, false);
          //assert(array[0] == 0 && array[4] == 103); // sanity
        } else alert('load fail :(');

        // Pass canvas and context to the generated code, and do the actual run() here
        Module.canvas = document.getElementById('canvas');
        Module.ctx2D = Module.canvas.getContext('2d');
        if (!Module.ctx2D) {
          alert('Canvas not available :(');
          return;
        }
        Module.run(['admiral.264']);
      }
    </script>
  <body onload='onLoad()' style='background-color: black; color: white'>
    <center>
      <canvas id='canvas'></canvas>
      <hr>
      <div id='fps'></div>
    </center>
  </body>
</html>

